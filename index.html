<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="8ball.css">
</head>
<body>
    <section class="stage">
        <figure class="ball" id="ball">
          <span class="shadow"></span>
          <span class="eight" id="eight"><span class="answer" id="answer"></span></span>
          <span class="answer" id="answer"></span>
        </figure>
      </section>
    <div class="words" contenteditable></div>
      <button id="button">Ask Again</button>
  <script>
    window.SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
  
    const recognition = new SpeechRecognition();
    recognition.interimResults = true;
    recognition.lang = 'en-US';
    
    let p = document.createElement('p');
    const words = document.querySelector('.words');
    words.appendChild(p);
  
    recognition.addEventListener('result', e => {
      const transcript = Array.from(e.results)
        .map(result => result[0])
        .map(result => result.transcript)
        .join('');
  
        const Script = transcript.replace();
        p.textContent = Script;
  
        if (e.results[0].isFinal) {
          p = document.createElement('p');
          words.appendChild(p);
        }
    });
    
    recognition.start();

    var answers = ["Heck no", 
                   "Hell. Yes.", 
                   "You already know", 
                   "You're joking, right?",
                   "You're wasting my time", 
                   "LOL, okay sure", 
                   "Just go get a fortune cookie", 
                   "If you think so...", 
                   "That's an XL nope",
                   "Um, okay",
                   "y i k e s", 
                   "Holy 8 balls, are you serious?",
                   "Welp.", 
                   "Never ask me that again",
                   "Bless your heart", 
                   "I am too tired to unwrap this right now", 
                   "I'm on break üíÖ", 
                   "Say that again?",
                   "yes baby üëº", 
                   "I support you",
                   "If you want it, make it so",
                   "I don't get paid enough for this üí©",
                   "yaaaaas üëè",
                   "Love that journey for you",
                   "What do you think?",
                   "You should get a cat",
                   "I hope so",
                   "[redacted]",
                   "Oh hell no",
                   "Mmmkay"
                  ];

    window.onload = function() {
       var answer = document.getElementById("answer");
       var delayAnswer = 2000;
       var delay8 = 3000;

       recognition.addEventListener('end', function() {
         var ball = document.getElementById("ball");
         ball.classList.toggle("ball2");
         setTimeout(function() {
           var eight = document.getElementById("eight");
           eight.classList.add("gone");
          }, delay8);
          setTimeout(function() {
            var num = Math.floor(Math.random() * Math.floor(answers.length));
            answer.innerText = answers[num];
          }, delayAnswer);
        });
      }
      //  var button = document.getElementById("button");
    
    document.body.onclick = function() {
      recognition.start();
    }
  </script>

</body>
</html>
